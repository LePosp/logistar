export function computeClusters(st){const cell=48,map=new Map();for(const s of st.systems){const sx=(s.x+st.t.x)*st.t.scale,sy=(s.y+st.t.y)*st.t.scale;const ix=Math.floor(sx/cell),iy=Math.floor(sy/cell);const k=ix+':'+iy;let c=map.get(k);if(!c){c={sx:0,sy:0,wx:0,wy:0,count:0,mining:0,gas:0,hub:0};map.set(k,c);}c.sx+=sx;c.sy+=sy;c.wx+=s.x;c.wy+=s.y;c.count++;if(s.type==='mining')c.mining++;else if(s.type==='gas')c.gas++;else c.hub++;}const out=[];for(const c of map.values()){const type=c.mining>c.gas&&c.mining>c.hub?'mining':(c.gas>c.hub?'gas':'hub');out.push({sx:c.sx/c.count,sy:c.sy/c.count,wx:c.wx/c.count,wy:c.wy/c.count,count:c.count,type});}return out;}
